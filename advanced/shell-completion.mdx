---
title: Shell Completion
description: "Enable command-line completion for vet to speed up your workflow"
---

# Shell Completion

Command-line completion (shell completion) is a feature provided by shells like `bash`, `zsh`, and others that automatically fills in partially typed commands when you press the `tab` key. This functionality makes using `vet` faster and helps prevent typos.

## Benefits of Shell Completion

<CardGroup cols={2}>
  <Card title="Faster Typing" icon="keyboard">
    Auto-complete commands, flags, and file paths
  </Card>
  <Card title="Reduced Errors" icon="shield-check">
    Prevent typos and invalid command combinations
  </Card>
  <Card title="Discovery" icon="search">
    Explore available commands and options interactively
  </Card>
  <Card title="Efficiency" icon="zap">
    Speed up daily workflow with intelligent suggestions
  </Card>
</CardGroup>

## Setup Instructions

### Step 1: Identify Your Shell

First, determine which shell you're using:

```bash
echo $SHELL
```

Common outputs:
- `/bin/bash` - Bash shell
- `/bin/zsh` - Zsh shell (default on macOS)
- `/bin/fish` - Fish shell

### Step 2: Generate Completion Script

Get setup instructions for your specific shell:

<Tabs>
  <Tab title="Zsh (macOS default)">
    ```bash
    # Get setup instructions
    vet completion zsh -h
    ```
    
    The output will show:
    ```
    Generate the autocompletion script for the zsh shell.

    If shell completion is not already enabled in your environment you will need
    to enable it. You can execute the following once:

        echo "autoload -U compinit; compinit" >> ~/.zshrc

    To load completions in your current shell session:

        source <(vet completion zsh); compdef _vet vet

    To load completions for every new session, execute once:

    #### Linux:
        vet completion zsh > "${fpath[1]}/_vet"

    #### macOS:
        vet completion zsh > $(brew --prefix)/share/zsh/site-functions/_vet

    You will need to start a new shell for this setup to take effect.
    ```
  </Tab>
  
  <Tab title="Bash">
    ```bash
    # Get setup instructions  
    vet completion bash -h
    ```
    
    Typical setup:
    ```bash
    # Enable completion support
    echo 'source <(vet completion bash)' >> ~/.bashrc
    
    # Or install globally (Linux)
    vet completion bash > /etc/bash_completion.d/vet
    
    # Or install for user (macOS with Homebrew)
    vet completion bash > $(brew --prefix)/etc/bash_completion.d/vet
    ```
  </Tab>
  
  <Tab title="Fish">
    ```bash
    # Get setup instructions
    vet completion fish -h
    ```
    
    Typical setup:
    ```bash
    # Install for current user
    vet completion fish > ~/.config/fish/completions/vet.fish
    
    # Or install globally
    vet completion fish > /usr/share/fish/completions/vet.fish
    ```
  </Tab>
</Tabs>

### Step 3: Install Completion (Zsh Example)

For Zsh on macOS, run these commands:

```bash
# Enable completion support (if not already enabled)
echo "autoload -U compinit; compinit" >> ~/.zshrc

# Install completion for current session
source <(vet completion zsh); compdef _vet vet

# Install completion permanently
vet completion zsh > $(brew --prefix)/share/zsh/site-functions/_vet
```

### Step 4: Verify Installation

Start a new shell session and test completion:

```bash
vet [TAB]
```

You should see available commands and options:

<img src="/images/vet/vet-autocomplete.png" alt="vet shell completion in action" />

## Using Shell Completion

### Command Completion

```bash
# Type partial command and press TAB
vet sc[TAB]          # Completes to "vet scan"
vet completion b[TAB] # Completes to "vet completion bash"
```

### Flag Completion

```bash
# Complete command flags
vet scan --[TAB]     # Shows all available flags
vet scan --rep[TAB]  # Completes to "--report-"
```

### File Path Completion

```bash
# Complete file and directory paths
vet scan -D /path/to/[TAB]    # Shows directories
vet scan --lockfiles ./[TAB]  # Shows files in current directory
```

### Context-Aware Suggestions

The completion system understands command context:

```bash
# After scan command, suggest scan-specific flags
vet scan --filter-[TAB]       # Shows filter-related options

# After query command, suggest query-specific flags  
vet query --from [TAB]        # Shows directory completion
```

## Advanced Configuration

### Custom Completion Scripts

Create wrapper scripts with enhanced completion:

```bash
#!/bin/bash
# ~/.local/bin/vet-wrapper

# Common scan patterns
if [[ "$1" == "scan-prod" ]]; then
    vet scan -D . --exclude 'test/*' --exclude 'docs/*' "${@:2}"
elif [[ "$1" == "scan-dev" ]]; then
    vet scan -D . --exclude 'node_modules/*' "${@:2}"
else
    vet "$@"
fi
```

### Shell Aliases with Completion

```bash
# Add to ~/.zshrc or ~/.bashrc
alias vs='vet scan'
alias vq='vet query'
alias vc='vet completion'

# Enable completion for aliases (Zsh)
compdef vs=vet
compdef vq=vet
compdef vc=vet
```

### Environment-Specific Setup

```bash
# Development environment completion
alias vet-dev='vet --config ~/.vet/dev-config.yml'
compdef vet-dev=vet

# Production environment completion
alias vet-prod='vet --config ~/.vet/prod-config.yml'
compdef vet-prod=vet
```

## Troubleshooting

<AccordionGroup>
  <Accordion title="Completion Not Working">
    Common solutions:
    - Restart your shell or source your profile: `source ~/.zshrc`
    - Check if completion is properly installed: `ls -la $(brew --prefix)/share/zsh/site-functions/_vet`
    - Verify your shell configuration loads completions
  </Accordion>
  
  <Accordion title="Slow Completion">
    If completion is slow:
    - Check for conflicts with other completion systems
    - Ensure vet binary is in your PATH
    - Consider updating to the latest version of vet
  </Accordion>
  
  <Accordion title="Partial Completion">
    If only some completions work:
    - Verify the completion script is complete and not truncated
    - Check shell configuration for conflicts
    - Try regenerating the completion script
  </Accordion>
</AccordionGroup>

## IDE Integration

### VS Code

Install the `shellcheck` extension and configure it to recognize vet completion:

```json
{
  "shellcheck.customArgs": [
    "-e", "SC1091",
    "-e", "SC2034"
  ]
}
```

### Vim/Neovim

Add vet completion to your vim configuration:

```vim
" Enable command-line completion
set wildmode=longest:full,full
set wildmenu

" Add vet completion for shell commands
autocmd FileType sh,bash,zsh call SetupVetCompletion()

function! SetupVetCompletion()
  " Custom completion logic for vet commands
  setlocal omnifunc=VetComplete
endfunction
```

## Best Practices

<AccordionGroup>
  <Accordion title="Regular Updates">
    Regenerate completion scripts when updating vet:
    ```bash
    # After updating vet
    vet completion zsh > $(brew --prefix)/share/zsh/site-functions/_vet
    ```
  </Accordion>
  
  <Accordion title="Multiple Environments">
    Set up different completion contexts for different environments:
    ```bash
    # ~/.zshrc
    if [[ "$ENVIRONMENT" == "production" ]]; then
        source ~/.vet/prod-completion.zsh
    else
        source ~/.vet/dev-completion.zsh
    fi
    ```
  </Accordion>
  
  <Accordion title="Team Consistency">
    Share completion setup in your team's development documentation:
    ```bash
    # Add to project README or setup scripts
    echo "Setting up vet shell completion..."
    vet completion $SHELL > ~/.local/share/completions/vet
    ```
  </Accordion>
</AccordionGroup>

## Platform-Specific Notes

### macOS with Homebrew

```bash
# Completion directory
$(brew --prefix)/share/zsh/site-functions/

# Bash completion (if bash-completion is installed)
$(brew --prefix)/etc/bash_completion.d/
```

### Linux

```bash
# System-wide Zsh completion
/usr/share/zsh/site-functions/

# User-specific Zsh completion
~/.local/share/zsh/site-functions/

# Bash completion
/etc/bash_completion.d/
```

### Windows (WSL)

```bash
# Follow Linux instructions within WSL
# Ensure Windows Terminal supports completion display
```

<CardGroup cols={2}>
  <Card title="vet CLI Reference" icon="terminal" href="https://github.com/safedep/vet">
    Complete command-line reference and documentation
  </Card>
  <Card title="Shell Documentation" icon="book" href="https://zsh.sourceforge.io/Doc/Release/Completion-System.html">
    Learn more about Zsh completion system
  </Card>
  <Card title="Quick Start Guide" icon="rocket" href="/quickstart">
    Get started with vet basics before setting up completion
  </Card>
  <Card title="Advanced Usage" icon="cog" href="/advanced/build-your-own-queries">
    Explore advanced vet features that benefit from completion
  </Card>
</CardGroup>