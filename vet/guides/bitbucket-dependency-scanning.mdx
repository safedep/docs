---
title: Bitbucket Dependency Scanning
description: "Native Bitbucket integration for dependency security scanning with vet"
---

SafeDep now supports **Bitbucket** & `vet` integration called `vet-pipe`, is a [Bitbucket Pipe](https://bitbucket.org/product/features/pipelines/integrations) which can easily integrated into any bitbucket CI/CD workflow.

## Prerequisites

<CardGroup cols={2}>
  <Card title="Bitbucket Account" icon="bitbucket">
    Active Bitbucket account with access to your project
  </Card>
  <Card title="Repository" icon="code">
    A source code repository to integrate `vet-pipe` in `pipelines`.
  </Card>
</CardGroup>

## Quick Start

### 1. Enable CI on Your Project

If you don't already have `bitbucket-pipelines.yml`, create one

```bash
touch bitbucket-pipelines.yml
```

### 2. Add `vet-pipe` in your pipeline

```yaml
script:
  - pipe: safedep/vet-pipe:v1.0.0
```

This is the simplest way to run `vet-pipe` with default values.

## Inputs

`vet-pipe` accepts many inputs (aka variables) that you can specify when running the `pipe`.

### `POLICY` file

[Policy as Code](https://docs.safedep.io/vet/advanced/policy-as-code#what-is-policy-as-code) treats security policies as configuration files that can be evaluated by tools to make runtime decisions.

Define these policies in a policy.yml file (the filename can be anything).

To specify this file, use the `POLICY` variable:

```yml
image: alpine:latest

pipelines:
  default:
    - step:
        name: "Run Vet Scan"
        script:
          - pipe: safedep/vet-pipe:v1.0.0
            variables:
              POLICY: "./vet/policy.yml"
```

<Note>
When a policy violation occurs, the pipeline fails. To overwrite this, set `SKIP_FILTER_CI_FAIL: "true"` in **variables**, to skip **fail** when a policy violation happens.
</Note>

### CLOUD SYNC

[Cloud Sync](https://docs.safedep.io/cloud/sync#cloud-sync) synchronize vet scan data and policy violations with SafeDep Cloud for centralized analysis, query and reporting.

We use these variables to enable cloud sync:

```yml
script:
  - pipe: safedep/vet-pipe:v1.0.0
    variables:
      CLOUD: true
      CLOUD_KEY: '--YOUR-SAFEDEP-API-KEY--'
      CLOUD_TENANT: '--YOUR-SAFEDEP-TENANT-ID--'
```

You can generate your `API KEY` AND `TENANT ID` from [https://app.safedep.io](https://app.safedep.io)

### Other Inputs

See the [`vet-pipe` Bitbucket repo](https://bitbucket.org/safedep/vet-pipe/) for more detail about other avaialbe inptus.

## Artifact

Each [`vet`](https://github.com/safedep/vet) execution produces `vet-report.json` file, this is produced by applying `--report-json` flag in vet command. 

We can enable downloading of this file by using `artifact` property in `bitbucket-pipelines.yml`

```yaml
- step:
    name: "Run Vet Scan"
    script:
      - pipe: safedep/vet-pipe:v1.0.0
    artifacts:
      - vet-report.json
```

This file will be available to download at **Pipelines > Select a Pipeline > Artifacts (top left of log panel)**

## Support

Please raise an issue on [vet-pipe GitHub repo](https://github.com/safedep/vet-bitbucket-pipe/issues) or [vet-pipe Bitbucket mirror](https://bitbucket.org/safedep/vet-pipe/) in  for any support requests.
